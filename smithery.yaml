# smithery.yaml
# Configuração do Memory MCP para Smithery.ai

startCommand:
  type: stdio
  configSchema:
    type: object
    properties:
      port:
        type: integer
        description: "Porta em que o servidor irá escutar"
        default: 3000
      database_path:
        type: string
        description: "Caminho para o arquivo do banco de dados SQLite"
        default: "/data/memories.db"
      log_level:
        type: string
        enum: ["DEBUG", "INFO", "WARNING", "ERROR"]
        description: "Nível de log do servidor"
        default: "INFO"
      max_memories:
        type: integer
        description: "Número máximo de memórias que podem ser armazenadas"
        default: 1000
    required: ["port", "database_path"]
  
  commandFunction: |-
    (config) => ({
      command: "memory-mcp",
      args: [
        "--port", config.port.toString(),
        "--db-path", config.database_path,
        "--log-level", config.log_level
      ],
      env: {
        PORT: config.port.toString(),
        MAX_MEMORIES: config.max_memories.toString(),
        LOG_LEVEL: config.log_level
      }
    })

build:
  dockerfile: Dockerfile
  dockerBuildPath: .
  
  # Configurações adicionais de build
  buildArgs:
    PYTHON_VERSION: "3.11"
    UV_VERSION: "latest"
